<div th:fragment="morphologyDialog"
     id="morphologyDialog" title="Morphology/crystallography" style="display:none;">
    <div class="grid gap-1 text-xs">
        <div class="flex items-baseline gap-2.5" hidden>
            <label class="kt-form-label max-w-56">ID :</label>
            <input class="kt-input" id="morphId" disabled type="text"/>
        </div>
        <div class="flex items-baseline gap-2.5" hidden>
            <label class="kt-form-label max-w-56">Stage :</label>
            <input class="kt-input" id="morphStage" disabled type="text"/>
        </div>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Magnification :</label>
            <input class="kt-input" id="morphMagnification" type="number" step="any"/>
        </div>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Lattice Structure :</label>
            <input class="kt-input" id="morphLatticeStructure" type="text"/>
        </div>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Aspect Ratio :</label>
            <input class="kt-input" id="morphAspectRatio" type="text"/>
        </div>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Porosity :</label>
            <input class="kt-input" id="morphPorosity" type="text"/>
        </div>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Colour :</label>
            <input class="kt-input" id="morphColour" type="text"/>
        </div>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Particle Size & Distribution :</label>
            <input class="kt-input" id="morphParticle" type="text"/>
        </div>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Shape :</label>
            <input class="kt-input" id="morphShape" type="text"/>
        </div>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Surface Features :</label>
            <input class="kt-input" id="morphSurfaceFeatures" type="text"/>
        </div>
        <th:block th:if="${stage==4}">
            <div class="flex items-baseline gap-2.5">
                <label class="kt-form-label max-w-56">Plutonium Homogeneity :</label>
                <input class="kt-input" id="morphPlutonium" type="text"/>
            </div>
        </th:block>
        <div class="flex items-baseline gap-2.5">
            <label class="kt-form-label max-w-56">Notes :</label>
            <input class="kt-input" id="morphNotes" type="text"/>
        </div>
        <th:block th:if="${stage==2 || stage==3 || stage==4}">
            <div class="flex items-baseline gap-2.5">
                <label class="kt-form-label max-w-56">Image/PDF :</label>
                <div class="flex flex-col gap-1 w-full">
                    <input class="kt-input" id="morphImageFileInput" type="file" accept="image/*,application/pdf"/>
                    <input id="morphImageFile" type="hidden"/>
                    <div class="flex items-center gap-2 text-xs">
                        <a id="morphImageFilePreview" class="kt-link" href="#" target="_blank" rel="noopener noreferrer"
                           style="display:none;">View current file</a>
                        <button type="button" id="morphImageFileClear" class="kt-btn kt-btn-sm kt-btn-light"
                                style="display:none;">Remove file</button>
                    </div>
                    <span class="text-xs text-gray-500">Supported formats: images or PDF.</span>
                </div>
            </div>
        </th:block>
        <div class="flex justify-end gap-2">
            <button type="button" id="saveMorphology" class="kt-btn kt-btn-primary">Save</button>
        </div>
    </div>
</div>

